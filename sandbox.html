<html>
<head>
  <title>Twelve</title>
  <style type="text/css">
  pre em {
    color: gray;
  }
  </style>
  <!-- Twelve Core -->
  <script src="js/core/ajax.js"></script>
  <script src="js/core/coffeescript.js"></script>
  <script src="js/core/peg.js"></script>
  <script src="js/core/ext.js"></script>
  <script src="js/core/query.js"></script>
  <script src="js/core/world.js"></script>
  <script src="js/core/logic.js"></script>

  <script type="text/javascript">
  window.onload = function() {
    var goods = document.querySelectorAll(".good")
    var allLogic = ""
    for (var i = 0; i < goods.length; i++) allLogic += goods[i].textContent + "\n";
    for (var i = 0; i < goods.length; i++) {
      console.log(Logic.parser.parse(goods[i].textContent))
      goods[i].innerHTML += "\n<em>&rarr; " + JSON.stringify(Logic.parser.parse(goods[i].textContent)) + "</em>";
    };

    Logic.addFromString(allLogic);
  }
  </script>
</head>
<body>
  <pre class="good">bear {
  @alertness = $$item.reduce (prev, item) -> prev + item.effect()
}</pre>
  <pre class="good">foo bar:start { console.log "Mode A" }</pre>
  <pre class="good">foo bar baz:start { console.log "Mode B" }</pre>
  <pre class="good">foo bar:end { @die when:now }</pre>
  <pre class="good">foo bar { @die when:now }</pre>
  <pre class="good">foo { @die when:now }</pre>
  <pre class="good">bar<90 { @die when:now }</pre>
</body>
</html>
